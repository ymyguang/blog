# 实习问题和收获

## 一，Java

Q:但是一旦把package设置为于FeOrderBiz类一直的包路径，就可以自动装配了，否则显示无法装配（没有bean)

如果将测试类`DemoService1Test`的包路径设置为与`FeOrderBiz`相同，它突然能够自动装配，而在不同包路径下则显示无法装配，这通常指向Spring的组件扫描配置问题。在Spring Boot应用中，Spring框架默认只扫描启动类所在的包及其子包下的组件。如果`FeOrderBiz`位于启动类所在包或其子包内，而`DemoService1Test`位于一个不同的包路径（不是启动类包路径的子路径），那么在默认配置下，Spring不会扫描到`DemoService1Test`所在的包，因此也就不会扫描到用`@Autowired`注解的`FeOrderBiz`实例。



## 二，框架

Spring Boot框架

问题：对于controller层中，为什么需要注入service的类再使用。为什么不直接使用类似调用工具类的方法直接使用service中的方法。

**控制反转这里指的控制指的是对谁的控制？**

在这里，“控制反转”中的“控制”是指**对程序中对象的创建、配置和管理的控制**。 在没有使用IoC之前，当我们在A类中需要使用到B类的对象时，一般会在A类中直接通过new关键字来新建一个B类的对象，也就是说，这个B对象的创建、所有权和生命周期的控制权都在A类中。 而当使用IoC后，这些控制权就被“反转”给了Spring框架，由Spring负责创建B类的对象，然后再在必要的时候注入给A类。所以这里的“控制”就是指对这个对象的创建、配置和管理的控制。 简单来说，IoC就是将设计好的对象交给容器控制，而不是传统的在你的对象内部直接控制。如此一来，当我们在开发时，只需要关心业务逻辑，而不需要去处理对象的生命周期，大大的提高了开发效率。













## 三，数据库

#### JDBC的链接URL问题

场景：

```
url: jdbc:mysql://134.122.134.6:3306/ai?characterEncoding=UTF-8&useUnicode=true&useSSL=false&tinyInt1isBit=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai
```

这个字符串是一个JDBC（Java Database  Connectivity）连接URL，用于在Java应用程序中连接到MySQL数据库。JDBC是一个Java  API，可以与任何基于SQL的数据库进行交互，提供了一种执行数据库操作的统一方法。这个URL包含了连接数据库所需的所有信息，让我们来逐部分解析它：

- `jdbc:mysql://`：这部分指明了要使用的是JDBC类型的连接，以及数据库类型是MySQL。
- `134.122.134.6:3306`：这是MySQL服务器的IP地址和端口号。IP地址指的是数据库服务器所在的位置，而3306是MySQL的默认端口号。这里的IP地址和端口号表明了数据库服务器的网络地址。
- `/ai`：这指定了数据库的名字，即连接的目标数据库是名为`ai`的数据库。
- `characterEncoding=UTF-8&useUnicode=true`：这些参数指定了字符集编码为UTF-8，使用Unicode字符集，确保应用程序可以正确处理多语言文本。
- `useSSL=false`：这表明连接时不使用SSL加密。SSL（安全套接字层）用于在数据库服务器和客户端之间加密通信，提高安全性。这里设置为false可能是因为在一个受信任的内部网络中操作，或者是为了简化配置。
- `tinyInt1isBit=false`：这个参数控制`TINYINT(1)`类型的数据是否被解释为位类型。在MySQL中，`TINYINT(1)`有时被用来表示布尔值（1为true，0为false）。将这个设置为false意味着`TINYINT(1)`类型的字段将被当作普通的数值字段。
- `allowPublicKeyRetrieval=true`：这个参数是为了解决MySQL 8及更高版本在默认情况下禁止从服务器获取RSA公钥的问题，它允许客户端从服务器获取RSA公钥以安全地发送密码。

**说明**：

1. ##### 传参问题

后面的所跟的参数并不是直接给到MySQL而是传输给JDBC,原因是

```
jdbc:mysql://134.122.134.6:3306/ai?***
```

这个URL的开始段是**jdbc**,因此不论是传输指定的数据库还是密码、是否使用SSL都是传递给的JDBC  Drive.

​	2. tinyInt1isbit参数

当您在JDBC连接URL中包含`tinyInt1isBit=false`参数时，您实际上是在告诉JDBC驱动在处理`TINYINT(1)`数据时不要自动将其视为Java中的布尔类型（`boolean`），即使在数据库中`TINYINT(1)`通常用于表示布尔值。这样，当您从数据库检索这种类型的字段时，它们会以整数形式返回给您的Java应用程序，而不是布尔值。

#### 事务相关问题（SpringBoot）

https://blog.csdn.net/qq_26106607/article/details/112056156

事务分为两种，一个是声明式事务、一个是手动式事务。但是Mybatis-plus都是支持的（在SpringBoot中)。下面是两个事务的区别和好处坏处：

1. 声明式事务



1. 手动式事务

## 四、Redis

键值系统，有

- 字符串
- 列表
- 字典
- 位置信息
- 字符串
- 哈希





#### **redisson**锁

- 防止对同一数据进行并发表操作，导致数据混乱；

场景：用户A有三个退单操作，同时有三个操作人，当没有加锁的时候，就会存在三个人可以同时操作的场景，但是这样一来，可能就会对A的数据造成混乱，比如是余额的几倍等.

但是有了锁之后，就只能运行一个用户同时操作数据A的数据（对用户A的ID进行加锁）



## 五、配置问题

## Maven and Spring Boot 配置问题

Maven指定的profiles的方法：

其中，          `<activeByDefault>true</activeByDefault>`表示的是默认启用的配置。

```
<profiles>
    <profile>
       <id>dev</id>
       <properties>
          <profiles.active>dev</profiles.active>
       </properties>
       <activation>
          <activeByDefault>true</activeByDefault>
       </activation>
    </profile>
    <profile>
       <id>test</id>
       <properties>
          <profiles.active>test</profiles.active>
       </properties>
    </profile>
    <profile>
       <id>prodh5</id>
       <properties>
          <profiles.active>prodh5</profiles.active>
       </properties>
    </profile>
    <profile>
       <id>prod</id>
       <properties>
          <profiles.active>prod</profiles.active>
       </properties>
    </profile>
    <profile>
       <id>prod2</id>
       <properties>
          <profiles.active>prod2</profiles.active>
       </properties>
    </profile>
</profiles>
```

当你使用Maven构建一个项目时，你可以根据不同的环境使用不同的配置文件。以一个Web应用程序为例，假设你有三个不同的配置文件：dev、test和prod。

在dev配置文件中，你可以定义数据库连接信息为本地开发环境的数据库：

xml

```xml
<profile>
    <id>dev</id>
    <properties>
        <profiles.active>dev</profiles.active>
        <db.url>jdbc:mysql://localhost:3306/mydb_dev</db.url>
        <db.username>devuser</db.username>
        <db.password>devpass</db.password>
    </properties>
    <activation>
        <activeByDefault>true</activeByDefault>
    </activation>
</profile>
```

在test配置文件中，你可以定义数据库连接信息为测试环境的数据库：

xml

```xml
<profile>
    <id>test</id>
    <properties>
        <profiles.active>test</profiles.active>
        <db.url>jdbc:mysql://test-server:3306/mydb_test</db.url>
        <db.username>testuser</db.username>
        <db.password>testpass</db.password>
    </properties>
</profile>
```

在prod配置文件中，你可以定义数据库连接信息为生产环境的数据库：

xml

```xml
<profile>
    <id>prod</id>
    <properties>
        <profiles.active>prod</profiles.active>
        <db.url>jdbc:mysql://prod-server:3306/mydb_prod</db.url>
        <db.username>produser</db.username>
        <db.password>prodpass</db.password>
    </properties>
</profile>
```

当你构建项目时，你可以通过指定不同的配置文件来使用不同的数据库连接信息。例如，使用`mvn clean install -Pdev`命令来构建并使用dev配置文件，Maven将使用dev配置文件中定义的数据库连接信息。同样，你可以使用`mvn clean install -Ptest`来使用test配置文件，使用`mvn clean install -Pprod`来使用prod配置文件。

这样，你可以根据不同的环境和需求，轻松切换不同的配置，而无需手动更改代码或配置文件中的数据库连接信息。

