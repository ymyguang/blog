# linux\$\r报错问题




## linux无法解析\`$'\r'\`报错

今天在Windows上编写好shell脚本，在本地测试时成功的，但是当我把脚本放到服务器上，centos的系统上运行时，报错。

![image-20200629150115314](https://gitee.com/ymyguang/picture/raw/master/img/image-20200629150115314.png)

我对比了自己的shell文件，并没有发现**’$'\r'‘**这个符号，自己很是困惑，把这个关键词放在加上Linux在Google搜索后，才发现时Windows换行符于Linux的换行符不相同的原因导致的！

在Windows中，换行符是：\r\n

而Linux系统中，换行符是：\n

所以在Linux内肯定没办法执行。我在notepad++中，将CRLF模式切换成LF模式后，顺利解决；

其他解决方案安装插件

```shell
apt install dos2unix  # 此插件作用就是解决换行不兼容问题
```





#### 在这里说一下：CRLF以及LF

两者都是换行的意思，一个是在windows下，一个是在Linux下。

其中

- CR(Carriage Return) 代表回车，对应字符 `'\r'`；
- LF(Line Feed) 代表换行，对应字符 `'\n'`；

#### 有关回车和换行的背景

> 在计算机还没有出现之前，有一种叫做电传打字机（Teletype Model 33，Linux/Unix下的tty概念也来自于此）的玩意，每秒钟可以打10个字符。但是它有一个问题，就是打完一行换行的时候，要用去0.2秒，正好可以打两个字符。要是在这0.2秒里面，又有新的字符传过来，那么这个字符将丢失。
>
> 于是，研制人员想了个办法解决这个问题，就是在每行后面加两个表示结束的字符。一个叫做“回车”，告诉打字机把打印头定位在左边界；另一个叫做“换行”，告诉打字机把纸向下移一行。这就是“换行”和“回车”的来历，从它们的英语名字上也可以看出一二。
>
> 后来，计算机发明了，这两个概念也就被般到了计算机上。那时，存储器很贵，一些科学家认为在每行结尾加两个字符太浪费了，加一个就可以。于是，就出现了分歧。
>
> Unix系统里，每行结尾只有“<换行>”，即"\n"；Windows系统里面，每行结尾是“<换行><回车 >”，即“\n\r”；Mac系统里，每行结尾是“<回车>”，即"\r"；。一个直接后果是，Unix/Mac系统下的文件在 Windows里打开的话，所有文字会变成一行；而Windows里的文件在Unix/Mac下打开的话，在每行的结尾可能会多出一个^M符号。

